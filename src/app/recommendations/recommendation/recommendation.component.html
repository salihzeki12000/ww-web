<div class="custom-modal" *ngIf="showItineraries">
  <div class="form-card">
    <div class="form-header">
      <h3>Add to itinerary - {{ recommendation?.place.name }}</h3>
      <a (click)="cancel()">X</a>
    </div>

    <div class="form-housing">

      <div class="progress-tracker-section">
        <ul class="progress-tracker">
          <li class="progress-title" (click)="backToSelectItinerary()" [class.progress-done]="itinerarySelected">SELECT ITINERARY</li><li class="progress-title">SELECT DISPLAY PICTURE</li>
        </ul>
      </div>

      <div *ngIf="!itinerarySelected">
        <h4>Please select itinerary to add to:</h4>
        <div class="copy-to-itinerary-list">
          <div *ngFor="let itinerary of itineraries" class="copy-to-itinerary" (click)="selectItinerary(itinerary)">
            <h4>{{ itinerary.name }} - ({{ itinerary.date_from | date:"dd MMM yy" }} to {{ itinerary.date_to | date:"dd MMM yy" }})</h4>
          </div>
        </div>
      </div>

      <div *ngIf="itinerarySelected">
        <h4>Please select a display picture:</h4>
        <div class="slider" *ngIf="recommendation?.place.photos">
          <div class="slider-images" *ngFor="let image of recommendation?.place.photos; let i = index">
            <input type="radio" name="slide_switch" id="image-{{i}}" (click)="selectPic(image)" checked>
            <label for="image-{{i}}">
              <img src="{{ image.url }}" alt="">
            </label>
            <img src="{{ image.url }}" alt="">
            <h5 class="photo-credit" [innerHTML]="image.credit"></h5>
          </div>
        </div>
      </div>

    </div>

    <div class="action-response">
      <h5 class="action-response-secondary" (click)="cancel()">CANCEL</h5>
      <h5 *ngIf="itinerarySelected" class="action-response-primary" (click)="save()"> <i class="fa fa-floppy-o" aria-hidden="true"></i> SAVE</h5>

    </div>
  </div>
</div>

<div class="main">

  <div class="recommend-header">
    <h3>{{ recommendation?.originator.username }} has recommended {{ recommendation?.place.name }}</h3>

    <h4 (click)="addToItinerary()">Add to itinerary</h4>
    <h4>Ignore</h4>
  </div>

  <div class="recommendation-message">
    <ww-user-profile-card [user]="recommendation?.originator" [currentUser]="recommendation?.recipient"></ww-user-profile-card>

    <div class="message">
      <h4>Says: </h4>
      <h4 [innerHTML]="recommendation?.formatted_message"></h4>
    </div>
  </div>

  <div class="slider" *ngIf="recommendation?.place.photos">
    <div class="slider-images" *ngFor="let image of recommendation?.place.photos; let i = index">
      <input type="radio" name="slide_switch" id="image-{{i}}" checked>
      <label for="image-{{i}}">
        <img src="{{ image.url }}" alt="">
      </label>
      <img src="{{ image.url }}" alt="">
      <h5 class="photo-credit" [innerHTML]="image.credit"></h5>
    </div>
  </div>

  <div class="details">
    <div class="details-item" *ngIf="recommendation?.place.formatted_address">
      <i class="fa fa-map-marker fa-fw" aria-hidden="true"></i>
      <h5> {{ recommendation?.place.formatted_address }}</h5>
    </div>

    <div class="details-item" *ngIf="recommendation?.place.international_phone_number">
      <i class="fa fa-phone fa-fw" aria-hidden="true"></i>
      <a href="tel:{{ recommendation?.international_phone_number }}">{{ recommendation?.place.international_phone_number }}</a>
    </div>

    <div class="details-item" *ngIf="recommendation?.formatted_hours">
      <i class="fa fa-clock-o fa-fw" aria-hidden="true"></i>
      <h5 [innerHTML]="recommendation?.formatted_hours"></h5>
    </div>

    <div class="details-item" *ngIf="recommendation?.place.entry_fee">
      <i class="fa fa-money fa-fw" aria-hidden="true"></i>
      <h5>{{ recommendation?.place.entry_fee }}</h5>
    </div>

    <div class="details-item" *ngIf="recommendation?.place.website">
      <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
      <h5 class="truncate">
        <a href="{{recommendation?.place.website}}" target="_blank" class="website-link">{{ recommendation?.place.website }}</a>
      </h5>
    </div>

    <div class="details-item" *ngIf="recommendation?.formatted_note">
      <i class="fa fa-sticky-note-o fa-fw" aria-hidden="true"></i>
      <h5 class="note" [innerHTML]="recommendation?.formatted_note"></h5>
    </div>

  </div>

  <div class="map">
    <ww-location-pin
    [lat]="recommendation?.place.lat"
    [lng]="recommendation?.place.lng"
    [width]="'300px'"
    [height]="'300px'"></ww-location-pin>
  </div>

</div>
