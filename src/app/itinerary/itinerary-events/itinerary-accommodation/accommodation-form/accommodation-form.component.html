<form [formGroup]="addAccommodationForm" (ngSubmit)="saveNew()">

    <div class="form-card">

      <div class="form-header">
        <h3>New accommodation arrangement</h3>
        <a (click)="cancelForm()">x</a>
      </div>

      <div class="textless-header"></div>

      <div class="form-housing">

        <div class="progress-tracker-section">
          <ul class="progress-tracker">
            <li class="progress-title" (click)="backToSearch()" [class.progress-done]="searchDone">SEARCH ACCOMMODATION</li><li class="progress-title">CONFIRM CHECK IN/OUT DETAILS</li>
          </ul>
        </div>

        <div *ngIf="!searchDone">
          <label>Search accommodation by name or address <span class="required"> - local name or address may be required</span></label>
          <ww-google-place-search (placeDetail)="getAccommodationDetails($event)"></ww-google-place-search>
          <h6 class="cannot-find" (click)="skipSearch()">Cannot find your accommodation? Proceed to key in details ></h6>
        </div>

        <div *ngIf="searchDone">
          <h4 class="form-section-header">Check In/Out Details</h4>
          <div class="form-section-details">

            <div class="check-in">
              <div class="date-to-visit">
                <label>Check In Date</label>
                <select class="select-date" name="check_in_date" formControlName="check_in_date">
                  <option *ngFor="let itinDate of itinDateRange; let i = index" [value]="itinDate">
                    <div *ngIf="itinDate !== 'any day'">
                      <h5>Day {{ i + 1 }}, {{ itinDate | date: "dd MMM yyyy (EEEE)"}}</h5>
                    </div>
                  </option>
                </select>
              </div>

              <div class="time-to-visit">
                <label>Check In Time</label>
                <input type="time" formControlName="check_in_time">
              </div>
            </div><!-- end of check in -->

            <div class="check-out">
              <div class="date-to-visit">
                <label>Check Out Date</label>
                <select class="select-date" name="check_out_date" formControlName="check_out_date">
                  <option *ngFor="let itinDate of itinDateRange; let i = index" [value]="itinDate">
                    <div *ngIf="itinDate !== 'any day'">
                      <h5>Day {{ i + 1 }}, {{ itinDate | date: "dd MMM yyyy (EEEE)"}}</h5>
                    </div>
                  </option>
                </select>
              </div>

              <div class="time-to-visit">
                <label>Check Out Time</label>
                <input type="time" formControlName="check_out_time">
              </div>
            </div><!-- end of check out -->

          </div>

          <h4 class="form-section-header">Accommodation Details</h4>
          <div class="form-section-details">

            <div class="form-select-image" *ngIf="!uploadPic">
              <label>Select an image as the display picture</label>

              <div class="slider">
                <div class="slider-images" *ngFor="let image of pictureOptions; let i = index">
                  <input type="radio" name="slide_switch" id="image-{{i}}" (click)="selectPic(image)" checked>
                  <label for="image-{{i}}">
                    <img src="{{ image }}" alt="">
                  </label>
                  <img src="{{ image }}" alt="">
                </div>
              </div>
            </div>

            <div class="uploaded-picture" *ngIf="uploadPic">
              <h4 class="delete-picture" (click)="deleteUpload()">X</h4>
              <img [src]="uploadPic">
            </div>

            <div class="upload-picture">
              <label class="file-upload">
                Upload Image From My Library
                <input type="file" (change)="fileUploaded($event)" [value]="inputValue" accept="image/*">
              </label>
            </div>

            <label>Name of Accommodation <span class="required"> - required</span></label>
            <input type="text" formControlName="name">
            <span class="form-validator"
              *ngIf="addAccommodationForm.get('name').touched && addAccommodationForm.get('name').invalid">Name of accommodation is required</span>

            <label>Address</label>
            <input type="text" formControlName="formatted_address">

            <div *ngIf="manualEntry" class="lat-lng">
              <label>Enter the coordinates of the location to pin it on the map</label>
              <div class="lat">
                <label>Latitude (N)</label>
                <input type="number" formControlName="lat">
              </div>

              <div class="lng">
                <label>Longitude (E)</label>
                <input type="number" formControlName="lng">
              </div>
            </div>

            <label>Staying in (City/Town)</label>
            <input type="text" formControlName="stay_city">

            <label>Contact Number</label>
            <input type="text" formControlName="international_phone_number" class="contact-number-input">

            <label>Website</label>
            <input type="url" formControlName="website">

          </div>

          <h4 class="form-section-header">Note</h4>
          <div class="form-section-details">
            <textarea rows="3" formControlName="note"></textarea>
          </div>

          <div class="action-response">
            <h5 class="action-response-secondary" (click)="cancelForm()">CANCEL</h5>
            <button type="submit" class="action-response-primary" [disabled]="!addAccommodationForm.valid"><h5><i class="fa fa-floppy-o" aria-hidden="true"></i> SAVE</h5></button>
          </div>

        </div>
      </div>

    </div><!-- end of formCard -->

</form>

<div class="custom-modal" *ngIf="fileTypeError" (click)="exitError()">
  <div class="form-card">
    <div class="form-header">
      <h3>File type error</h3>
      <a (click)="exitError()">x</a>
    </div>

    <div class="confirm-delete-content">
      <i class="fa fa-exclamation-triangle fa-lg" aria-hidden="true"></i>
      <h4>The file you selected is not an image. Please try again.</h4>
    </div>

    <div class="confirm-delete-footer">
      <div class="action-response">
        <h5 class="action-response-primary" (click)="exitError()">OK</h5>
      </div>
    </div>
  </div>
</div>
